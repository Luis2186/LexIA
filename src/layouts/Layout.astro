---
import "../styles/global.css";
import Navigation from "../components/Navigation.astro";
import Footer from "../components/Footer.astro";
import ReadingProgress from "../components/ReadingProgress.astro";
import QuickSearch from "../components/QuickSearch.astro";

export interface Props {
    title?: string;
    showNavigation?: boolean;
    showFooter?: boolean;
    showReadingProgress?: boolean;
    showQuickSearch?: boolean;
}

const {
    title = "LexIA - AI Powered Application",
    showNavigation = true,
    showFooter = true,
    showReadingProgress = true,
    showQuickSearch = true,
} = Astro.props;
---

<!doctype html>
<html lang="es">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <meta
            name="description"
            content="Guía completa sobre la aplicación de Inteligencia Artificial en el desarrollo de software moderno."
        />
        <title>{title}</title>
    </head>
    <body class="bg-black text-white">
        {showNavigation && <Navigation />}
        {showReadingProgress && <ReadingProgress />}
        {showQuickSearch && <QuickSearch />}
        <main class={showNavigation ? "min-h-screen" : ""}>
            <slot />
        </main>
        {showFooter && <Footer />}

        <!-- Scroll to top button -->
        <button
            id="scroll-to-top"
            class="fixed bottom-8 right-8 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full shadow-lg transition-all duration-300 opacity-0 transform translate-y-4 pointer-events-none z-40"
            aria-label="Volver arriba"
        >
            <svg
                class="w-5 h-5"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
            >
                <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
            </svg>
        </button>
    </body>
</html>

<style>
    html,
    body {
        margin: 0;
        width: 100%;
        height: 100%;
        scroll-behavior: smooth;
    }

    /* Floating animation for particles */
    @keyframes float {
        0%,
        100% {
            transform: translateY(0px);
        }
        50% {
            transform: translateY(-20px);
        }
    }

    .floating-particle {
        animation: float 6s ease-in-out infinite;
    }
</style>

<script>
    // Scroll to top functionality
    document.addEventListener("DOMContentLoaded", () => {
        const scrollButton = document.getElementById("scroll-to-top");

        if (scrollButton) {
            // Show/hide button based on scroll position
            window.addEventListener("scroll", () => {
                if (window.pageYOffset > 300) {
                    scrollButton.classList.remove(
                        "opacity-0",
                        "translate-y-4",
                        "pointer-events-none",
                    );
                    scrollButton.classList.add("opacity-100", "translate-y-0");
                } else {
                    scrollButton.classList.add(
                        "opacity-0",
                        "translate-y-4",
                        "pointer-events-none",
                    );
                    scrollButton.classList.remove(
                        "opacity-100",
                        "translate-y-0",
                    );
                }
            });

            // Scroll to top when clicked
            scrollButton.addEventListener("click", () => {
                window.scrollTo({
                    top: 0,
                    behavior: "smooth",
                });
            });
        }
    });
</script>
