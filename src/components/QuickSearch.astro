---
// Este componente se agregar치 en una futura implementaci칩n con JavaScript del lado cliente
---

<div class="fixed top-20 right-8 z-40 hidden lg:block">
    <div
        class="bg-gray-800/90 backdrop-blur-sm border border-gray-600/50 rounded-lg p-4 w-64"
    >
        <h3 class="text-white text-sm font-semibold mb-3">
            游댌 B칰squeda R치pida
        </h3>

        <input
            type="text"
            id="quick-search"
            placeholder="Buscar herramientas..."
            class="w-full bg-gray-700/50 border border-gray-600/50 rounded-md px-3 py-2 text-white text-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"
        />

        <div id="search-results" class="mt-3 space-y-2 hidden">
            <!-- Los resultados se mostrar치n aqu칤 din치micamente -->
        </div>

        <div class="mt-3 text-xs text-gray-400">
            Presiona <kbd class="bg-gray-700 px-1 rounded">Ctrl + K</kbd> para abrir
        </div>
    </div>
</div>

<script>
    // Datos de b칰squeda - esto deber칤a cargarse din치micamente en una implementaci칩n real
    const searchData = [
        { name: "Claude", href: "/ia/claude", category: "Chat & Asistentes" },
        { name: "ChatGPT", href: "/ia/chatgpt", category: "Chat & Asistentes" },
        {
            name: "GitHub Copilot",
            href: "/ia/github-copilot",
            category: "Generaci칩n de C칩digo",
        },
        {
            name: "Replit AI",
            href: "/ia/replit-ai",
            category: "IDEs y Editores",
        },
        { name: "Cursor", href: "/ia/cursor", category: "IDEs y Editores" },
        {
            name: "Tabnine",
            href: "/ia/tabnine",
            category: "Generaci칩n de C칩digo",
        },
    ];

    document.addEventListener("DOMContentLoaded", () => {
        const searchInput = document.getElementById(
            "quick-search",
        ) as HTMLInputElement;
        const searchResults = document.getElementById(
            "search-results",
        ) as HTMLElement;

        // Funci칩n de b칰squeda
        function performSearch(query: string): void {
            if (!query || query.length < 2) {
                if (searchResults) {
                    searchResults.classList.add("hidden");
                }
                return;
            }

            const results = searchData.filter(
                (item) =>
                    item.name.toLowerCase().includes(query.toLowerCase()) ||
                    item.category.toLowerCase().includes(query.toLowerCase()),
            );

            if (!searchResults) return;

            if (results.length > 0) {
                searchResults.innerHTML = results
                    .slice(0, 5)
                    .map(
                        (item) => `
          <a href="${item.href}" class="block p-2 bg-gray-700/50 hover:bg-gray-600/50 rounded text-sm text-white transition-colors">
            <div class="font-medium">${item.name}</div>
            <div class="text-xs text-gray-400">${item.category}</div>
          </a>
        `,
                    )
                    .join("");
                searchResults.classList.remove("hidden");
            } else {
                searchResults.innerHTML =
                    '<div class="p-2 text-sm text-gray-400">No se encontraron resultados</div>';
                searchResults.classList.remove("hidden");
            }
        }

        // Event listeners
        if (searchInput) {
            searchInput.addEventListener("input", (e) => {
                const target = e.target as HTMLInputElement;
                if (target) {
                    performSearch(target.value);
                }
            });

            searchInput.addEventListener("keydown", (e) => {
                if (e.key === "Escape") {
                    searchInput.value = "";
                    if (searchResults) {
                        searchResults.classList.add("hidden");
                    }
                }
            });
        }

        // Atajo de teclado Ctrl+K
        document.addEventListener("keydown", (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === "k") {
                e.preventDefault();
                if (searchInput) {
                    searchInput.focus();
                }
            }
        });
    });
</script>
